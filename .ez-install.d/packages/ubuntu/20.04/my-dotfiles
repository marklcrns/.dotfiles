#!/usr/bin/env bash

############################################ PACKAGE METADATA (DO NOT TOUCH) ###
# ---
# package: my-dotfiles
# executable: my-dotfiles
# package-manager: 
# dependency: yarn neovim git-lfs
# author: Mark Lucernas
# date: 2022-01-08
# ---
################################################################################

source "${EZ_INSTALL_HOME}/install/init.sh"

#################################################### INSTALLATION (TOUCH OK) ###

# my-dotfiles installation template generated by ez-install

function _main() {
  if git_clone -a "--depth=1" -o "~/scripts" -f true -- "https://github.com/marklcrns/scripts"; then
    if git_clone -a "--depth=1" -o "~/.dotfiles" -f true -- "https://github.com/marklcrns/.dotfiles"; then
      "${HOME}/scripts/tools/dotfiles/dotdist" -VD -r "${HOME}/.dotfiles/.dotfilesrc" . "${HOME}"
    fi
  fi
  if git_clone -a "--recurse-submodules --depth=1" -o "~/.config/nvim" -f true -- "https://github.com/marklcrns/nvim-config"; then
    cd ~/.config/nvim && make
    git_clone -a "--depth=1" -o "~/.cache/vim/session" -f true -- "https://github.com/marklcrns/vim-sessions-cache"
  fi

  return $?
}

################################################# END INSTALL (DO NOT TOUCH) ###

res=0
_main "${@}"
res=$?

return $res
# Sourced by `pac-install()`, DO NOT USE `exit`. USE `return` INSTEAD
